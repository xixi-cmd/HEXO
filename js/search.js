var searchFunc=function(t,r,a){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e,n=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),t=document.getElementById(r);t&&(e=document.getElementById(a),0<$("#local-search-input").length&&t.addEventListener("input",function(){var h='<ul class="search-result-list">',p=this.value.trim().toLowerCase().split(/[\s\-]+/);e.innerHTML="",this.value.trim().length<=0||(n.forEach(function(t){var n=!0;t.title&&""!==t.title.trim()||(t.title="Untitled");var r,e,a,s,i=t.title.trim().toLowerCase(),l=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),c=t.url.startsWith("/")?t.url:"/"+t.url,u=-1,o=-1;""!==l?p.forEach(function(t,e){r=i.indexOf(t),u=l.indexOf(t),r<0&&u<0?n=!1:(u<0&&(u=0),0==e&&(o=u))}):n=!1,n&&(e=t.content.trim().replace(/<[^>]+>/g,""),0<=o&&(a=o+80,(a=0==(t=(t=o-20)<0?0:t)?100:a)>e.length&&(a=e.length),s=e.substring(t,a),p.forEach(function(t){var e=new RegExp(t,"gi");s=s.replace(e,'<span class="search-keyword">'+t+"</span>"),i=i.replace(e,'<span class="search-keyword">'+t+"</span>")}),h+="<li><a href='"+c+"' class='search-result-title'>"+i+"</a>",h+='<p class="search-result">'+s+"...</p>"),h+="</li>")}),h+="</ul>",e.innerHTML=h,window.pjax&&window.pjax.refresh(e))}))}})};